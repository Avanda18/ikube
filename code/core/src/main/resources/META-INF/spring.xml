<?xml version="1.0" encoding="UTF-8"?>

<!--
	This is the top level Spring configuration file for Ikube. Generally this file will be in the 
	META-INF directory of the ikube-core.jar, where Spring will read all the configuration. This 
	file contains the mandatory configuration system files and typically will also contain the client 
	specific files with indexables and data sources in it(them).
 -->
<beans
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:property="http://www.springframework.org/schema/p"
	xsi:schemaLocation="
			http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd">
	
	<context:property-placeholder
		location="classpath*:**/spring.properties" 
		properties-ref="ikube.toolkit.PropertyConfigurer" />
		
	<!-- This bean will look through the classpath and load every Spring properties file it finds. -->
	<bean
		id="ikube.toolkit.PropertyConfigurer"
		class="ikube.toolkit.PropertyConfigurer"
		property:fileNamePattern="spring.properties"
		lazy-init="false"
		init-method="initialize" />
	
	<!-- Mandatory system configuration files. -->
	<import resource="classpath:/META-INF/common/spring-aop.xml" />
	<import resource="classpath:/META-INF/common/spring-beans.xml" />
	<import resource="classpath:/META-INF/common/spring-actions.xml" />
	
	<!-- Optional system configuration files. -->
	<!-- <import resource="classpath:/META-INF/common/spring-ikube.xml" />
	<import resource="classpath:/META-INF/common/spring-geospatial.xml" /> -->

	<!-- Optional client configuration files for indexables. -->
	<import resource="classpath:/META-INF/client/spring-client.xml" />

	<!-- Optional client configuration files for data sources. -->
	<import resource="classpath:/META-INF/client/datasource/spring-h2-jdbc.xml" />
	<import resource="classpath:/META-INF/client/datasource/spring-db2-jdbc.xml" />
	<import resource="classpath:/META-INF/client/datasource/spring-oracle-jdbc.xml" />
</beans>