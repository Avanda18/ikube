<beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc.xsd">

	<!-- This configures the tiles container. -->
	<bean 
		id="tilesConfigurer" 
		class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" 
		p:definitions="/WEB-INF/tiles-defs/templates.xml" />

	<!-- This is the first handler that will be invoked by the dispatcher servlet. -->
	<bean 
		id="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping" 
		class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"
		p:order="1">
		<property name="mappings">
			<props>
				<prop key="/admin/search.html">ikube.web.admin.SearchController</prop>
				<prop key="/admin/server.html">ikube.web.admin.ServerController</prop>
				<prop key="/admin/servers.html">ikube.web.admin.ServersController</prop>
			</props>
		</property>
	</bean>

	<!-- 
		This is the second handler that will be called after the controller and will finally 
		resolve the view, i.e. it will wire the templates together and forward to the correct page. 
	-->
	<bean 
		id="vewResolver" 
		class="org.springframework.web.servlet.view.UrlBasedViewResolver" 
		p:order="2"
		p:suffix=".jsp"
		p:prefix="/WEB-INF/jsp/" 
		p:viewClass="org.springbyexample.web.servlet.view.tiles2.DynamicTilesView" />

	<!-- The controllers for the various pages that do the access logic if necessary. -->
	<bean name="ikube.web.admin.SearchController" class="ikube.web.admin.SearchController" />
	<bean name="ikube.web.admin.ServerController" class="ikube.web.admin.ServerController" />
	<bean name="ikube.web.admin.ServersController" class="ikube.web.admin.ServersController" />

	<!-- These are static resources basically. -->
	<mvc:view-controller path="/index.html" />
	<mvc:view-controller path="/results.html" />
	<mvc:view-controller path="/admin/admin.html" />
	<mvc:view-controller path="/documentation/index.html" />
	<mvc:view-controller path="/documentation/quickstart.html" />
	<mvc:view-controller path="/documentation/configuration.html" />
	<mvc:view-controller path="/documentation/searching.html" />
	<mvc:view-controller path="/documentation/lucene.html" />
	<mvc:view-controller path="/documentation/clustering.html" />
	<mvc:view-controller path="/documentation/indexes.html" />

</beans>